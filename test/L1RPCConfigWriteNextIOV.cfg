process L1RPCConfigWriteNextIOV = {

#    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    untracked PSet maxEvents = { untracked int32 input = 1 }

    # source of IoVs
    source = EmptyIOVSource {
        string timetype = "runnumber"
        uint64 firstValue = 2
        uint64 lastValue = 2
        uint64 interval = 1
    }

    # Get L1TriggerKeyList from DB
    include "CondCore/DBCommon/data/CondDBCommon.cfi"
    es_source orcon = PoolDBESSource
    {
        using CondDBCommon

        VPSet toGet =
        {
            { string record = "L1TriggerKeyListRcd"
              string tag = "L1TriggerKeyList_CRUZET_hlt" }
        }
    }

    replace orcon.connect = "sqlite_file:rpctconfig.db"
    replace orcon.DBParameters.authenticationPath = "."

# generate a new dummy TSC key
  es_module L1TriggerKeyDummy = L1TriggerKeyDummyProd
  {
        string tscKey = "dummy2"
        VPSet subsystemKeys = {
            {
            string record = "L1RPCConfigRcd"
            string type = "L1RPCConfig"
            string key = "COSMIC"
            string tag = "RPCPatterns_ppt1"
            }}
  }
  es_source L1TriggerKeyRcdSource = EmptyESSource {
    string recordName = "L1TriggerKeyRcd"
    vuint32 firstValid = { 1 }
    bool iovIsRunNotTime = true
  }

    # writer modules
module L1CondDBIOVWriter = L1CondDBIOVWriter
{
        string offlineDB = "sqlite_file:rpctconfig.db"
        string offlineAuthentication = ""
        string L1TriggerKeyTag = "L1TriggerKey_CRUZET_hlt"
        VPSet toPut = {
            {
            string record = "L1RPCConfigRcd"
            string tag = "RPCPatterns_ppt1"
            } }
}

    path p = { L1CondDBIOVWriter }

}
