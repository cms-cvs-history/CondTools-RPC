process Write2DB = 
{

  service = MessageLogger 
  {
     untracked vstring destinations = {"cout"}
     untracked PSet cout = 
     {
       untracked  PSet default = { untracked int32 limit = 0 }
     }
  }

  source = EmptyIOVSource 
  {
    string timetype = "runnumber"
    untracked uint32 firstRun = 1
    untracked uint32 lastRun = 1
    uint32 interval = 1
  }

  include "CondCore/PopCon/data/PopConDB.cfi"
  replace PopConDB.timetype = "runnumber"

# Select output destination:
## to write into sqlite file
  replace PopConDB.connect = "sqlite_file:RPCEMap.db"
#  replace PopConDB.DBParameters.authenticationPath="."
#
## to write into int2r_orcoff
#  replace PopConDB.connect = "oracle://cms_orcoff_int2r/CMS_COND_RPC"
#  replace PopConDB.DBParameters.authenticationPath="."    
#
## to write into orcon
#  replace PopConDB.connect = "oracle://orcon/CMS_COND_ON_170_RPC"
#  replace PopConDB.DBParameters.authenticationPath="."

# keep this commented out if you do not set Validate=1 below
#  include "CondCore/DBCommon/data/CondDBCommon.cfi"
#  replace CondDBCommon.connect = "sqlite_file:RPCEMap.db"
#  es_source = PoolDBESSource {
#    using CondDBCommon
#    VPSet toGet = {
#      { string record = "RPCEMapRcd"
#        string tag = "RPCEMap_v2"
#      }
#    }
#  }

  service = PopConDBOutputService 
            {
              using PopConDB
              VPSet toPut = 
              {{ 
                 string record = "RPCEMapRcd" 
                 string tag = "RPCEMap_v2" 
              }}
            }

  module WriteInDB = RPCEMapDBWriter
  {
    using PopConDB
    bool SinceAppendMode = true
    bool debug = false
    untracked int32 Validate = 0
    untracked string OnlineDBHost = "oracms.cern.ch"
    untracked string OnlineDBSID = "omds"
    untracked string OnlineDBUser = "RPC_CONFIGURATION"
    untracked string OnlineDBPass = "rpcconfconddb"
    untracked int32 OnlineDBPort = 10121
  }

  path p = {WriteInDB}
}
